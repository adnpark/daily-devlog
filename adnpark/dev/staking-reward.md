# [솔리디티 실전 씨-리즈] 스테이킹 및 토큰 에미션 컨트랙트 구현해보기

Created: 2022년 6월 3일 오전 2:29

- 크립토 프로젝트에는 여러 분야가 있다. DeFi, GameFi, NFT or NFTFi 등
- 정말 다양한 분야가 있고, 서로 많이 달라 보이지만 모든 프로젝트들은 공통점이 한가지 있다.
- 분류 명칭에 Fi가 자주 붙는것에서 알 수 있듯이 기본적으로 모든 프로젝트는 Financial한 측면, 즉 토큰과 토크노믹스를 갖는다.
- 토크노믹스에서 가장 흔하게 접하는 패턴이 프로젝트의 네이티브 토큰을 스테이킹하고 이에 따른 스테이킹 보상인 새로운 토큰, 즉 에미션을 얻는 것이다.
- 이번 글에서는 대부분의 크립토 프로젝트에서 흔히 필요로 하는 토큰 스테이킹 보상 분배 컨트랙트를 구현해보려고 한다.

- 우리가 구현할 스테이킹 보상 분배 컨트랙트의 요구사항은 다음과 같다.

1. 네이티브 토큰만을 스테이킹 할 수 있다.
2. 매 블록마다 새로운 토큰이 발행되며, 스테이커들에게 보상으로 분배된다.
3. 스테이커가 받는 보상 토큰의 수량은 스테이킹한 토큰의 수량에 비례하여 결정된다.

- 여기서 핵심은 3번을 구현하는것이다. 그러면 어떻게 구현해야 할까?
- 직관적으로 생각해보자.
- 스테이커가 한명일때는 꽤 단순할것 같은데, 여러명이 되는 순간 살짝 문제가 복잡해질 것 같다.
- 무엇보다 스테이킹 시점이 다를 경우 어떻게 해야 하는걸까? 하는 의문이 생긴다.
- 간단한 예시로 이 문제를 자세히 살펴보자.

- 그런데 이 구현에는 심각한 문제가 있다.
- 

- 스테이킹 보상 분배 컨트랙트의 베스트 프랙티스는 스시스왑의 MasterChef 컨트랙트이다.

## 더 읽어보기

- [https://dev.to/heymarkkop/understanding-sushiswaps-masterchef-staking-rewards-1m6f](https://dev.to/heymarkkop/understanding-sushiswaps-masterchef-staking-rewards-1m6f)